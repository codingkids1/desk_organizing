import tkinter as tk
import random

class SlidingPuzzle:
    def __init__(self, root):
        self.root = root
        self.root.title("4x4 슬라이딩 퍼즐")
        self.tiles = list(range(1, 16)) + [None]
        random.shuffle(self.tiles)
        self.create_widgets()

    def create_widgets(self):
        self.buttons = []
        for i in range(4):
            row = []
            for j in range(4):
                num = self.tiles[i * 4 + j]
                if num:
                    btn = tk.Button(self.root, text=str(num), width=5, height=2, command=lambda i=i, j=j: self.move_tile(i, j))
                else:
                    btn = tk.Button(self.root, text="", width=5, height=2, state=tk.DISABLED)
                btn.grid(row=i, column=j)
                row.append(btn)
            self.buttons.append(row)

    def move_tile(self, row, col):
        empty_row, empty_col = self.find_empty()
        if abs(empty_row - row) + abs(empty_col - col) == 1:
            self.tiles[empty_row * 4 + empty_col], self.tiles[row * 4 + col] = self.tiles[row * 4 + col], self.tiles[empty_row * 4 + empty_col]
            self.update_buttons()

    def find_empty(self):
        index = self.tiles.index(None)
        return index // 4, index % 4

    def update_buttons(self):
        for i in range(4):
            for j in range(4):
                num = self.tiles[i * 4 + j]
                if num:
                    self.buttons[i][j].config(text=str(num), state=tk.NORMAL)
                else:
                    self.buttons[i][j].config(text="", state=tk.DISABLED)

if __name__ == "__main__":
    root = tk.Tk()
    app = SlidingPuzzle(root)
    root.mainloop()
